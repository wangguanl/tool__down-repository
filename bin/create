#! /usr/bin/env node

console.log(123)
const program = require('commander')

program.command('create <app-name>').description('create a new project').option('-f, --force', 'Overwrite target directory if it exists').option('-c, --clone', 'Use git clone when fetching remote preset').action((name, cmd) => {
  console.log(cmd)
  const options = cleanArgs(cmd)
  console.log(options)
  require('../libs/create')(name, options)
})

function camelize(str) { return str.replace(/-(\w)/g, (_, c) => c ? c.toUpperCase() : '') } function cleanArgs(cmd) {
  const args = {}  // console.log(cmd)  
  if (cmd.options) {
    cmd.options.forEach(o => {
      const key = camelize(o.long.replace(/^--/, ''))
      // console.log(key)    
      // console.log(cmd[key])    
      // console.log(typeof cmd[key])   
      if (typeof cmd[key] !== 'function' && typeof cmd[key] !== 'undefined') { args[key] = cmd[key] }
    })
  }
  return args
}

program.version(`Version is ${require('../package.json').version}`).description('first create special').usage('<command> [options]')
program.parse(process.argv)

